# LabLink Configuration: Use Case 4 - Route53 + ACM (AWS Certificate Manager)
# Use AWS Route53 for DNS and ACM for SSL certificates via Application Load Balancer
#
# âœ… NO RATE LIMITS - AWS ACM has no certificate issuance limits
# Enterprise-grade SSL with ALB (~$20/month additional cost)
#
# Prerequisites:
# - Route53 hosted zone created
# - ACM certificate requested and validated for your domain
# - Certificate ARN obtained from ACM console
#
# Setup:
# 1. Request ACM certificate in ACM console (us-west-2)
# 2. Validate certificate (DNS or email validation)
# 3. Copy certificate ARN to ssl.certificate_arn below
# 4. Deploy infrastructure (Terraform creates ALB with HTTPS listener)
#
# Access URL: https://lablink.example.com
#
# Cost Note: ALB adds ~$20/month but provides enterprise-grade SSL termination and scalability

db:
  dbname: "lablink_db"
  user: "lablink"
  password: "PLACEHOLDER_DB_PASSWORD"
  host: "localhost"
  port: 5432
  table_name: "vms"
  message_channel: "vm_updates"

machine:
  machine_type: "g4dn.xlarge"
  image: "ghcr.io/talmolab/lablink-client-base-image:linux-amd64-latest-test"
  ami_id: "ami-0601752c11b394251"  # us-west-2
  repository: "https://github.com/talmolab/sleap-tutorial-data.git"
  software: "sleap"
  extension: "slp"

allocator:
  image_tag: "linux-amd64-latest-test"

app:
  admin_user: "admin"
  admin_password: "PLACEHOLDER_ADMIN_PASSWORD"
  region: "us-west-2"

dns:
  enabled: true  # Route53 DNS enabled
  terraform_managed: true  # Terraform creates/destroys A record (alias to ALB)
  domain: "lablink.example.com"  # Full domain
  zone_id: ""  # Auto-lookup hosted zone

eip:
  strategy: "persistent"
  tag_name: "lablink-eip"

ssl:
  provider: "acm"  # AWS Certificate Manager via ALB
  email: ""  # Not needed for ACM
  certificate_arn: "arn:aws:acm:us-west-2:123456789012:certificate/abcd1234-5678-90ab-cdef-EXAMPLE11111"  # REPLACE with your ACM cert ARN

startup_script:
  enabled: false
  path: "config/custom-startup.sh"
  on_error: "continue"

bucket_name: "tf-state-lablink-YOURORG"